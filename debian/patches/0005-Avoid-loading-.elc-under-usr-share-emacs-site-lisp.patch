From: Tatsuya Kinoshita <tats@debian.org>
Date: Sat, 21 Jan 2023 22:42:49 +0900
Subject: Avoid loading *.elc under /usr/share/emacs/site-lisp

---
 lisp/startup.el | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/lisp/startup.el b/lisp/startup.el
index d94341d..7203b5d 100644
--- a/lisp/startup.el
+++ b/lisp/startup.el
@@ -1363,11 +1363,15 @@ please check its value")
     ;; See cus-edit.el for an example.
 
     ;; Debian startup
+    (dolist (dir load-path)
+      (if (string-match "^/usr/share/emacs/site-lisp/" dir)
+          (setq load-path (delete dir load-path))))
     (if site-run-file
         (progn
           ;; Load all the debian package snippets.
           ;; It's in here because we want -q to kill it too.
-          (if (load "debian-startup" t t nil)
+          (if (or (load "/usr/share/emacsen-common/debian-startup.el" t t t)
+                  (load "debian-startup" t t nil))
               (debian-startup debian-emacs-flavor))
           ;; Now the normal site file...
           (let ((inhibit-startup-screen inhibit-startup-screen))
